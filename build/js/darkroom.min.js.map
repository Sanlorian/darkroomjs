{"version":3,"file":"build/js/darkroom.min.js","sources":["build/lib/js/darkroom.js","build/lib/js/plugins/darkroom.history.js","build/lib/js/plugins/darkroom.rotate.js","build/lib/js/plugins/darkroom.crop.js","build/lib/js/plugins/darkroom.save.js"],"names":["window","document","fabric","extend","b","a","prop","undefined","hasOwnProperty","Darkroom","element","options","plugins","this","init","Plugin","darkroom","defaults","initialize","Toolbar","actionsElement","querySelector","ButtonGroup","Button","prototype","protoProps","child","parent","constructor","apply","arguments","Surrogate","__super__","createButtonGroup","buttonGroup","createElement","className","appendChild","createButton","image","type","group","hide","disabled","button","innerHTML","disable","addEventListener","eventName","callback","active","value","classList","add","remove","Canvas","util","createClass","minWidth","minHeight","maxWidth","maxHeight","canvas","getElement","dispatchEvent","event","_this","Image","onload","initDOM","initImage","initPlugins","bind","call","src","toolbar","canvasContainer","container","parentNode","replaceChild","selection","backgroundColor","width","height","scaleMin","scaleMax","scaleX","scaleY","Math","min","max","scale","selectable","evented","lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasControls","hasBorders","setScaleX","setScaleY","setWidth","setHeight","centerObject","setCoords","name","plugin","getPlugin","selfDestroy","snapshotImage","toDataURL","_initButtons","backHistoryStack","forwardHistoryStack","_snapshotImage","_onImageChange","goBack","length","push","currentImage","pop","_applyImage","_updateButtons","goForward","backButton","forwardButton","imgInstance","leftButton","rightButton","rotateLeft","rotateRight","rotate","angle","getAngle","abs","getWidth","getHeight","renderAll","Event","CropZone","Rect","_render","ctx","callSuper","dashWidth","flipX","flipY","fillStyle","_renderOverlay","setLineDash","mozDash","strokeStyle","_renderBorders","_renderGrid","lineDashOffset","borderOffset","x0","ceil","getLeft","x1","x2","x3","y0","getTop","y1","y2","y3","fillRect","beginPath","moveTo","lineTo","stroke","startX","startY","ratio","cropButton","okButton","cancelButton","toggleCrop","cropCurrentZone","releaseFocus","on","onMouseDown","onMouseMove","onMouseUp","onObjectMoving","onObjectScaling","hasFocus","currentObject","target","cropZone","x","y","w","h","maxX","maxY","set","preventScaling","minX","e","pageX","_offset","left","pageY","top","minY","lastScaleX","setLeft","lastScaleY","setTop","scaleToWidth","scaleToHeight","getScaleX","getScaleY","point","Point","activeObject","getActiveObject","containsPoint","discardActiveObject","_renderCropZone","setActiveObject","calcOffset","selectZone","forceDimension","requireFocus","bringToFront","visible","fill","originX","originY","cornerColor","cornerSize","transparentCorners","hasRotatingPoint","defaultCursor","fromX","fromY","toX","toY","isRight","isLeft","isDown","isUp","leftX","rightX","topY","bottomY","currentRatio","newWidth","newHeight","destroyButton"],"mappings":"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"}